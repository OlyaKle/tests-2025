# ЛР1
Выполнила: Клещенко Ольга Дмитриевна

Поток: 1.1
## Тема работы: Unit tests
- Цель: научиться писать unit-тесты для существующего проекта.
- Задачи: выбрать проект, проанализировать, что и как тестировать, написать тесты и подготовить отчёт о результатах.

### Выбор проекта
Для анализа и тестирования был написан простой проект "калькулятор", в котором реализованы функции сложения, вычитания, умножения, деления двух чисел и проверка является ли число простым на языке python.

### Анализ
Самые важные части проекта - функции мат операций: сложение (`def add(a, b)`), вычитание (`def subtract(a, b)`), умножение (`def multiply(a, b)`), деление (`def divide(a, b)`) и 
проверка на "простоту" числа (`def is_prime(n)`).

Критическим участком является функция деления двух чисел. Важно проверить не является ли делитель нулём. 

Также в функции проверки на простое число, важно учесть ключевой сценарий - ограничение на то, что 0 и 1 не являются простыми числами.

### Написание тестов
Важно было использовать подход AAA и принципы FIRST. То есть каждый тест должен быть составлен по структуре: подготовка тестовых данных -> выполнение тестируемого действия -> проверка результата. Также тесты должны выполняться минимальное кол-во времени, быть независимыми друг от друга, давать один и тот же результат при каждом запуске, быть самопроверяемыми и написанными во время разработки проекта.

Для реализации тестов был использован фреймворк *pytest*.
#### тест 1 - проверка результата сложения двух положительных чисел
```
def test_add_positive_numbers():
    # Arrange - подготовка тестовых данных
    a, b = 2, 3
    expected = 5

    # Act - выполнение тестируемого действия
    result = add(a, b)

    # Assert - проверка результата
    assert result == expected
```
#### тест 2 - проверка "отрабатываемости" ограничения на 0
```
def test_divide_by_zero():
    # Arrange
    a, b = 5, 0

    # Act & Assert
    with pytest.raises(ValueError) as exc_info:
        divide(a, b)

    # Проверка результата, т.е. сообщения об ошибке
    assert str(exc_info.value) == "Делитель не может быть нулем"
```
#### тест 3 - проверка результата умножения двух отрицательных чисел
```
def test_multiply_negative_numbers():
    # Arrange
    a, b = -3, -4
    expected = 12

    # Act
    result = multiply(a, b)

    # Assert
    assert result == expected
```
#### тест 4 - проверка результата вычитания нуля из числа
```
def test_subtract_zero():
    # Arrange
    a, b = 5, 0
    expected = 5

    # Act
    result = subtract(a, b)

    # Assert
    assert result == expected
```
#### тест 5 - параметризованные тесты на проверку результата функции "на простоту числа"
Декоратор @pytest.mark.parametrize позволил объединить все кейсы под одну функцию.
```
@pytest.mark.parametrize("number,expected", [
    (1, False),  # 1 не простое
    (2, True),  # простое
    (4, False),  # четное число
    (17, True),  # простое число
    (25, False),  # составное число
])
def test_is_prime(number, expected):
    # Act и Assert
    assert is_prime(number) == expected
```
Результаты тестов выведены на консоль на картинке.

<img src="https://github.com/OlyaKle/tests-2025/blob/main/запуск-тестов.jpg" width="500" alt="Запуск тестов">

### Code coverage 
Для проверки качества тестов был установлен пакет pytest pytest-cov и запущены тесты с *code coverage* следующими командами.
```
pip install pytest pytest-cov
pytest --cov=small_project test_sm_project.py
```
Результат тестов и метрика *code coverage* на картинке ниже.

<img src="https://github.com/OlyaKle/tests-2025/blob/main/запуск-тестов-с-code%20coverage.jpg" width="500" alt="Запуск тестов с code coverage">
